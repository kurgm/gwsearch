!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequire94c2;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequire94c2=i);var a=i.register;a("67vMA",function(t,n){e(t.exports,"register",function(){return r},function(e){return r=e});var r,i=new Map;r=function(e,t){for(var n=0;n<t.length-1;n+=2)i.set(t[n],{baseUrl:e,path:t[n+1]})}}),a("91XAa",function(t,n){e(t.exports,"getBundleURL",function(){return r},function(e){return r=e}),e(t.exports,"getOrigin",function(){return i},function(e){return i=e});var r,i,a={};r=function(e){var t=a[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return(""+e[2]).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}(),a[e]=t),t},i=function(e){var t=(""+e).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^/]+/);if(!t)throw Error("Origin not found");return t[0]}}),i("67vMA").register(i("91XAa").getBundleURL("glOsZ"),JSON.parse('["glOsZ","index.31d04c8e.js","dPT7b","worker.945d4ff9.js"]'));var o={},l={};l=function(e,t,n){if(t===self.location.origin)return e;var r=n?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))};var s=i("91XAa");let d=s.getBundleURL("glOsZ")+"worker.945d4ff9.js";o=l(d,s.getOrigin(d),!1),document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("search_form"),t=document.getElementById("search_query"),n=document.getElementById("result"),r=new Worker(o),i=[];function a(e){return new Promise((t,n)=>{let a=i.push({resolve:t,reject:n})-1;r.postMessage({...e,id:a})})}async function l(e){return(await a({type:"query",query:e})).value}async function s(e){return(await a({type:"children",items:e})).value}r.addEventListener("message",e=>{if(!(e.data instanceof Object))return;let t=e.data,n=i[t.id];if(n){if("error"in t){n.reject(t.error);return}n.resolve(t)}});let d=null;function c(e){let t=document.createElement("ul");for(let{names:n,children:r}of e){let e=document.createElement("li");if(r.length){e.dataset.children=r.map(e=>e[0]).join(",");let t=document.createElement("button");t.appendChild(document.createTextNode("+")),e.appendChild(t)}for(let[t,r]of n.entries()){0!==t&&e.appendChild(document.createTextNode(" = "));let n=function(e,t){if(e.startsWith("abst:")){let t=e.substring(5);if(/^abst:cdp-[0-9a-f]{4}$/.test(e))t=`&CDP-${e.substring(9).toUpperCase()};`;else if(/^abst:u[0-9a-f]{4,}$/.test(e)){let n=e.substring(6),r=String.fromCodePoint(parseInt(n,16));t=`U+${n.toUpperCase()}: ${r}`}else/^abst:_bs-uc-\d{4}$/.test(e)&&(t=`&_BS-UC-${e.substring(12)};`);return document.createTextNode(t)}let n=document.createElement("a");if(n.href=`https://glyphwiki.org/wiki/${e}`,n.title=e,!t){let t=document.createElement("img");t.loading="lazy",t.src=`https://glyphwiki.org/glyph/${e}.50px.png`,t.alt=t.title=e,t.className="thumb",n.appendChild(t)}return n.appendChild(document.createTextNode(e)),n}(r,0!==t);e.appendChild(n)}t.appendChild(e)}return t}e.addEventListener("submit",e=>{for(e.preventDefault();n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode("(検索中)")),function(e){let t=function(e){let t=[];for(let n=/([a-z][a-z0-9_-]{4,})|&CDP-([\dA-F]{4});|&_BS-UC-(\d{4});|U\+([\dA-F]{1,6})|&#[Xx]([\da-fA-F]+);|&#(\d+);|(\S)/gu,r;null!==(r=n.exec(e));){let e;let[,n,i,a,o,l,s,d]=r;if(n){t.push(n);continue}if(i){t.push(`abst:cdp-${i.toLowerCase()}`);continue}if(a){t.push(`abst:_bs-uc-${a}`);continue}e=o?parseInt(o,16):l?parseInt(l,16):s?parseInt(s,10):d.codePointAt(0),t.push(`abst:u${e.toString(16).padStart(4,"0")}`)}return t}(e);d=t,l(t).then(e=>{d===t&&function(e){for(;n.firstChild;)n.removeChild(n.firstChild);if(!e.length){n.appendChild(document.createTextNode("(該当結果なし)"));return}let t=c(e);n.appendChild(t)}(e)}).catch(e=>{console.error(e)})}(t.value)}),n.addEventListener("click",e=>{if(!(e.target instanceof HTMLButtonElement&&e.target.parentNode instanceof HTMLLIElement&&e.target.parentNode.dataset.children))return;let t=e.target,r=e.target.parentNode;if(r.lastChild instanceof HTMLUListElement){t.textContent="+",r.removeChild(r.lastChild);return}t.disabled=!0,s(r.dataset.children.split(",")).then(e=>{if(!n.contains(r))return;let i=c(e);t.disabled=!1,t.textContent="-",r.appendChild(i)})})})}();
//# sourceMappingURL=index.31d04c8e.js.map
